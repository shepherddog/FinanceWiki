???+note

    信贷风险管理是一门艺术，更是一门科学。资产质量分析中常会涉及到三个理论：
    
    - 账龄分析（Vintage Analysis）：用以分析账户成熟期、变化规律等。
    - 滚动率分析（Roll Rate Analysis）：用以定义账户好坏程度。
    - 迁移率分析（Flow Rate Analysis）：用以分析不同逾期状态之间的转化率。

    本文基于《金融风控研究院-Vintage、滚动率和迁移率》，力求系统介绍这三者的概念、计算逻辑和业务应用，希望能对大家有所帮助。

## **Part 1.** 基础风控指标概念

为了更容易理解后续内容，我们先介绍一些基础的风控指标概念。

**定义一：账龄(Month on Book，MOB)**

指**资产放款月份**。类似于婴孩一出生就有了年龄，一旦申贷订单被放款，也便拥有了账龄和生命周期。

-   MOB0：放款日至当月月底
-   MOB1：放款后第二个完整的月份
-   MOB2：放款后第三个完整的月份

**MOB的最大值取决于信贷产品期限**。如果是12期产品，那么该资产的生命周期是12期，MOB最大到MOB12。

例如，2019年11月13日放款的订单，2019年11月是MOB0，2019年12月是MOB1，以此类推。

**定义二：逾期天数(Days Past Due，DPD)**

**逾期天数 = 实际还款日 - 应还款日。**

DPDN+表示逾期天数 >= N天，如DPD30+表逾期天数 >=30天的资产

例如，若还款日是每月8号，那么9号就是逾期第一天。如果客户在10号还款，那么逾期2天。

**定义三：逾期期数(M)**

**指实际还款日与应还款日之间的逾期天数，并按区间划分后的逾期状态。** M取自Month on Book的第一个单词。（注：不同机构所定义的区间划分可能存在差异）

-   M0：当前未逾期（或用C表示，取自Current）
-   M1： 逾期1-30日
-   M2：逾期31-60日
-   M3：逾期61-90日
-   M4：逾期91-120日
-   M5：逾期121-150日
-   M6：逾期151-180日
-   M7：逾期180日以上。此时也被称为*呆账*（Bad Debts），会予以注销账户（write-off）

## **Part 2. Vintage Analysis**

Vintage一词最初来源于葡萄酒业 。由于每年采摘的葡萄会受到日照、气温、降水等因素的影响，最终酿造的葡萄酒品质会存在差异。在窖藏一定年份后，葡萄酒的品质将趋于稳定，也就是品质成熟，这段年份数被称为*成熟期* （maturity）。

简便起见，我们以酒精浓度作为衡量葡萄酒品质的标准，约定：浓度越高，品质越好。首先，记录入窖年份作为该批次葡萄酒的标签，这也被称为Vintage或者Cohort。之后，我们将每年定期抽样测量酒精浓度，保存记录数据，如图1所示。

经过几年的数据积累，我们就可以绘制出酒精浓度随时间变化的Vintage曲线。俗话说，酒越酿越醇，Vintage曲线通常是*单调递增*的，如图1所示。

![](images/Pasted%20image%2020221201144844.png)

图 1 - 葡萄酒的Vintage曲线

我们可以利用Vintage曲线做什么呢？如图2所示，主要用途包括：

1.  **分析变化规律**：评估不同年份的葡萄酒的品质随着窖藏时间推移的变化规律。某些年份的葡萄酒浓度在入窖第1年就能达到较高的水平，但上升缓慢；有些起点低，但上升快 。
2.  **确定最终品质**：Vintage曲线最终稳定值，表明了这批葡萄酒的最终酒精浓度 。
3.  **确定成熟期**：由图1可知，在入窖第6年后，酒精浓度稳定不变，可以确定成熟期是6年，我们最早在第6年就可以开桶品尝 。
4.  **分析影响因素**：根据Vintage曲线特征，我们可以分析某个年份的葡萄所受到的环境影响因素，从而改善生产工艺。比如，由于某一年的光照不充分，糖分积累少，酒精浓度可能最终就比较低。我们就可以人工增加光照强度 。

![](images/Pasted%20image%2020221201144902.png)

图 2 - 葡萄酒的Vintage分析

在信贷领域中，我们也可以用Vintage曲线分析*资产*（portfolio）质量的成熟过程变化规律。为更容易理解，在此列举了Vintage分析过程中两个领域的对应关系，如图3所示。

![](images/Pasted%20image%2020221201144916.png)

图 3 - 葡萄酒和信贷行业的Vintage对比

遵循同样的分析思路，按账龄（MOB）长短对齐后比较，我们可以了解同一产品不同时期放款的资产质量。

1.  **确定资产质量**：一般以逾期率来定义资产质量，也就是曲线平缓后对应的逾期率。
2.  **分析变化规律**：资产质量（例如逾期率指标）的变化情况，如果前几期逾期率上升很快，那么说明短期风险没有捕捉住，欺诈风险较高；反之，如果曲线一直在上升，说明信用风险识别能力不佳。
3.  **确定账户成熟期**：用来判断客户展现好坏的时间因素，从而帮助定义表现期。
4.  **分析影响因素**：风控策略收紧或放松、客群变化、市场环境、政策法规等都会影响资产质量。分析影响因素，可以用来指导风控策略的调整。

求知的你肯定会疑惑，如果以逾期率来定义资产质量，那么逾期风险（目标变量Y）是如何定义的？如何确定M3，还是M6？ 稍安勿躁，后续将会结合滚动率分析来揭晓谜底。

首先，我们来分析为什么要确定账户的表现期？在《[风控特征—时间滑窗统计特征体系](https://zhuanlan.zhihu.com/p/85440355)》一文中，我们提到过：

> 表现期越长，信用风险暴露将越彻底，但意味着观察期离当前越远，用以提取样本特征的历史数据将越陈旧，建模样本和未来样本的差异也越大。反之，表现期越短，风险还未暴露完全，但好处是能用到更近的样本。

![](images/Pasted%20image%2020221201145203.png)

图 4 - 观察点、观察期与表现期

例如，对于一个12期分期还款的信贷产品，理论上当用户在12期结束，并还清所有的钱后，我们才能定义为绝对的好客户；反之，我们只能说到目前为止是一个好客户，但并不能知道未来几期用户会不会逾期不还钱。

因此，我们需要确定一个合适的表现期能覆盖足够多的坏客户即可。

![](images/Pasted%20image%2020221201145150.png)

图 5 - 某12期信贷产品2018年的Vintage曲线

根据图5的信贷产品Vintage曲线，我们可以得到哪些信息呢？

1.  账龄最长为12个月，代表**产品期限为12期**。随着12期结束，账户的生命周期走到尽头。
2.  账龄MOB1、MOB2、MOB3的逾期率都为0，说明**逾期指标为M4+（逾期超过90天）风险。**
3.  由放贷月份从2018年1月～12月的账户的最终逾期率都在降低，说明**资产质量在不断提升**，可能是因为风控水平在不断提升。
4.  2018年5月相对于2018年1～4月的逾期率大幅度下降，说明该阶段风控策略提升明显。
5.  不同月份放款的M4+在经过9个MOB后开始趋于稳定，说明**账户成熟期是9个月**。

绘制Vintage曲线时，就不得不提到纵坐标中逾期率的定义。通常有两种计算口径：

-   第一种，订单口径，逾期率 = 逾期订单数 / 总放贷订单数
-   第二种，金额口径，逾期率 = 逾期剩余本金 / 总放贷本金

目前互联网金融各家机构的**口径定义存在差异**，因此仅仅根据各家发布的Vintage曲线，有时并不能客观分析资产质量和风控水平。

计算逻辑详见：《[求是汪在路上：Vintage分析表计算过程详解](https://zhuanlan.zhihu.com/p/163206686)》

## **Part 3. Roll Rate Analysis**

滚动率分析就是从某个观察点之前的一段时间（观察期）的最坏的状态，向观察点之后的一段时间（表现期）的最坏的状态的发展变化情况，如图6所示。

⚠️注意：一般大家也习惯把vintage中的成熟期叫做表现期，因此出现一定的混淆。但意思是都是未来的一段时间窗。

![](https://pic4.zhimg.com/80/v2-2b205377904876fbfcecf9955d9082ff_720w.webp)

图 6 - 客户逾期状态转化

滚动率分析的具体操作步骤为：

-   **step 1.** 确定数据源。一般利用客户还款计划表（repayment schedule）。
-   **step 2.** 选择观察点，以观察点为截止时间，统计客户在观察期（如过去6个月）的最长逾期期数，按最坏逾期状态将用户分为几个层次，如C、M1、M2、M3、M4+。
-   **step 3.** 以观察点为起始时间，统计客户在表现期（如未来6个月）的最长逾期期数，按最坏逾期状态将用户分为几个层次，如C、M1、M2、M3、M4+。
-   **step 4.** 交叉统计每个格子里的客户数，如图6中表1所示。
-   **step 5.** 统计每个格子里的客户占比，如图6中表2所示。
-   **step 6.** 为了排除观察点选择时的随机影响，一般会选择多个观察点。重复step1 ～5。

例如，选择观察点为2018年6月30日，我们取10,000个客户作为研究对象，统计该10,000个客户从观察期到表现期的最大逾期状态的变化情况，如图7所示。

![](images/Pasted%20image%2020221201145825.png)

图 7 - 滚动率分析矩阵

观察图7，我们可以发现以下规律：

1.  逾期状态为M0的客户，在未来6个月里，有96%会继续保持正常状态，4%会恶化为M1和M2；
2.  逾期状态为M1的客户，未来有81%会回到正常状态，即从良率为81%，有7%会恶化，13%会保持M1状态；
3.  逾期状态为M2的客户，从良率为23%，有39%会恶化为M3和M4+；
4.  逾期状态为M3的客户，从良率为14.7%，有60.7%会恶化为M4+；
5.  逾期状态为M4+的客户，从良率仅为4%，有80%会继续保持此状态。

因此，我们认为历史逾期状态为M4+的客户已经坏透了，几乎不会从良。为了让风控模型有更好的区分能力，需要将客户好坏界限尽可能清晰，可以定义：

> 坏用户（bad）= 逾期状态为M4+（逾期超过90天）

## **Part 4. 如何确定目标变量Y**

在风控建模中，由于是有监督学习，我们非常关心如何定义合适的目标变量Y？这就需要结合滚动率分析和Vintage分析，两者的分工在于：

-   滚动率分析用于定义客户的**好坏程度**。
-   Vintage分析用于确定合适的**表现期**。

定义目标变量Y的具体操作步骤为：

-   **step 1.** 利用滚动率分析定义坏客户，例如上文案例中定义：**M4+为坏客户**。
-   **step 2.** 以M4+作为资产质量指标，统计Vintage数据表，绘制Vintage曲线。目的是**分析账户成熟期**，例如上文案例确定：**账户成熟期是9个月。**

你可能还是会比较疑惑，为什么还需要通过Vintage分析来确定表现期？

这是因为：虽然滚动率分析确定了M4+作为坏的程度，但是对于12期的产品，有些账户是在前4期MOB（也就是MOB1 ~ MOB4，经过4个表现期）就达到M4+，有些是在后几期才达到M4+。

对于这个Vintage里所有的账户，我们的目的是抓住尽可能多的坏客户。

现在进一步补充Vintage曲线的绘制过程：如图8所示，对于这10,000个账户，以MOB1为起点，把前N个MOB作为一个窗口，滑窗统计坏客户率，得到图5-表1中的Vintage数据，并绘制Vintage曲线。我们可以发现：经过9期，我们几乎能够抓住所有的坏客户。

![](https://pic4.zhimg.com/80/v2-8c0014d8126afefda8100c9e324ecd77_720w.webp)

图 8 - 不同客户的逾期状态(红=逾期，绿=正常)

因此，我们将两者结合起来，定义：

-   Bad = 账户经过9期表现期后，逾期状态为M4+（逾期超过90天）。此时 Y=1 。
-   Good = 经过9期表现期，但未达到M4+逾期状态。此时 Y=0 。
-   Intermediate = 未进入9期表现期，账户还未成熟，无法定义好坏，也就是不定样本。

## **Part 5. Flow Rate Analysis**

**迁移率分析法**（Flow Rate）也叫做**净流量滚动比例法**（Net Flow Rate），能形象展示客户贷款账户在整个生命周期中的变化轨迹，也是**预测未来坏账损失**的最常用的方法。

其**核心假设**为：处于某一逾期状态（如M2）的账户，一个月后，要么从良为M0账户，要么恶化为更坏的下一个逾期状态（如M3）。

> 迁移率 = 前一期逾期金额到下一期逾期金额的转化率

一般缩写为M0-M1、M4-M5等形式，例如：

-   M0-M1 = 当月进入M1的贷款余额 / 上月末M0的贷款余额
-   M2-M3 = 当月进入M3的贷款余额 / 上月末M2的贷款余额

迁移率分析的具体操作步骤为：

-   **step 1.** 定义逾期状态，如前文所述的M0、M1、M2等。
-   **step 2.** 计算各逾期状态之间的迁移率，如M0-M1、M2-M3等。
-   **step 3.** 计算不同月份（也可称为Vintage）的平均迁移率。目的是对本平台在不同时期的资产的迁移率有整体的认知。
-   **step 4.** 根据平均迁移率和不良资产回收率，计算净坏账损失率。

接下来，我们以数值案例（非真实业务数据）展示上述过程。

![](https://pic4.zhimg.com/80/v2-b5b4256a397202940da4bcef790aec87_720w.webp)

图 9 - 迁移率分析

图9-表2中，2月份的逾期M1资产只能从1月份的正常M0资产滚动而来，因此从逾期M0资产向M1的转化率为 2373371007843=23.55% 。

以此类推，我们可以计算所有月份的资产恶化率。黄色部分为不良资产的恶化迁移路径，其计算口径为：

-   截止1月末，正常M0资产为 1007844 元，这是起点。
-   截止2月末，1月末的正常M0资产中有 2373371007843=23.55% 恶化为逾期M1资产。
-   截止3月末，2月末的逾期M1资产中有 55362237338=23.33% 恶化为逾期M2资产。
-   截止4月末，3月末的逾期M2资产中有 2514455362=45.42% 恶化为逾期M3资产。
-   截止5月末，4月末的逾期M4资产中有 20965525144=83.38% 恶化为逾期M5资产。此时已过催收黄金期（90天以内）。
-   截止6月末，5月末的逾期M5资产中有 1035020965=49.37% 恶化为逾期M6资产。这可能采用了委外催收、司法手段等催收策略，效果显著。
-   截止7月末，6月末的逾期M5资产中有 855910350=82.70% 恶化为逾期M7资产。此时将视为不良资产，打包转卖给第三方公司，这样就能回收部分不良资产，减少损失。

通过迁移率，我们可以清晰观察到每个Vintage的资产在各逾期状态的演变规律。

图9-表2中，我们从横向比较每个月的迁移率，发现不完全一样。这是因为随着时间推移、外在宏观经济环境、内部政策等变化而产生一定的波动。我们可以利用这些数据：

1.  观察迁移率的发展轨迹，监控坏账的发展倾向和催收效果。
2.  通过对多个月份的迁移率计算平均值，从而使迁移率更加稳定。

## **Part 6. 坏账准备金的计算**

呆帐风险是信贷机构必须面对的风险，主要来源于信用风险和欺诈风险等。为了应对未来呆帐的可能，信贷机构一般都会设定一个储备资金，这就是**坏账准备金（Bad Debt Reserve）。**那么我们该如何计算坏账准备金？

一般做法是，把未清偿贷款余额乘以一定的**准备金比例（Reserve Ratio）**所得。可以理解，资产逾期等级越高（越差），准备金比例也应该越高，因为恶化为呆帐的可能性也更高。如图10所示，正常M0资产恶化为呆帐的可能性最低，因此我们预留的准备金比例也就最少。

我们总结下计算坏账准备金的步骤为：

-   **step 1.** 统计未清偿贷款金额的分布，也就是M0~M6状态分别对应的资产余额。
-   **step 2.** 为每个逾期状态的资产分配一个准备金比例。
-   **step 3.** 每个子项目的准备金金额 = 未清偿贷款余额 x 准备金比例。
-   **step 4.** 每个子项目的准备金金额相加，得到最终的准备金。

![](https://pic3.zhimg.com/80/v2-7f7c474479a20271db484361905e4d06_720w.webp)

图 10 - 坏账准备金计算示例

你或许会问，这里最关键的准备金比例是如何给出的？

由于坏账准备金是用来覆盖预期的未来呆帐损失的，**准备金比例必须等于处于各个逾期状态的资产未来演变为呆帐的比例**。

回到迁移率分析中，我们发现从正常M0资产迁移至逾期M7资产（呆帐）需经过7次迁移，如图11所示。那么，我们只要把各个状态之间的转化率相乘，不就得到准备金比例了？

![](https://pic3.zhimg.com/80/v2-2bc3e7254690eb773faa4bc66ef5ea6e_720w.webp)

图 11 - 各逾期状态的迁移率和毛坏账率计算

因此，我们定义**正常M0资产对应的毛坏账损失率，**也就是迁移到呆帐的转化率为**：**

> 毛坏账损失率 = (M0−M1)×(M1−M2)×...×(M6−M7)

在本案例中，正常M0资产对应的毛坏账损失率为：

(1)16.1%×29.28%×42.27%×80.1%×53.6%×80.32%×88.03%=0.60%

在实际中，信贷机构会将不良资产打包转卖给第三方公司，这样就能回收部分不良资产，减少损失。因此，我们定义净坏账损失率为：

> 净坏账损失率 = 毛坏账损失率 - 不良资产外卖回收率

由于M7不良资产的平均回收率为 10.79% ，则可计算**净坏账损失率**为：

(2)0.60%×(1−10.79%)=0.54%

同理，我们可以计算正常资产到不同逾期状态资产的毛损失率和净损失率如下：

![](https://pic4.zhimg.com/80/v2-35d0ebb91b81844a08674e690b317477_720w.webp)

图 12 - 毛损失率和净损失率

根据图12所示的损失率表，我们定义：

-   当月应计拨备额 = SUM(净坏账损失率 * 月末应收账款余额)
-   拨备率 = 当月应计拨备额 / 总资产金额

其中，拨备率是用来预防不良资产的发生而准备的金额的比例。拨备率应越低越好。拨备率越高说明风险越大，损失越大，利润越小。

![](https://pic4.zhimg.com/80/v2-5cbf67b46a2bd9cfc0c10175b7aec153_720w.webp)

图 13 - 2018年7月的资产预计期望损失计算

在本案例中，当月应计拨备额为65421元，如图13所示。拨备率为：654212625091=2.49%

## **Part 7. 总结**

本文所整理的主要知识点包括：

1.  Vintage、滚动率、迁移率的概念和区别。
2.  如何根据数据分析来确定风控建模中的好坏定义。
3.  拨备率的概念，以及如何根据迁移率来计算拨备率。

## 参考资料

[^1]:信贷风控中Vintage、滚动率、迁移率的理解：https://zhuanlan.zhihu.com/p/81027037